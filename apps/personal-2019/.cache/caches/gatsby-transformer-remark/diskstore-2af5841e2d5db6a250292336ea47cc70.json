{"expireTime":9007200894403823000,"key":"transformer-remark-markdown-ast-43db93d83d5cf473e9aed57ea6de61ea-gatsby-remark-autolink-headersgatsby-remark-imagesgatsby-remark-copy-linked-filesgatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"link","url":"#rozdil-mezi-event-targets-v-javascriptu-a-jak-je-vyuzit-k-optimalizaci","title":null,"children":[],"data":{"hProperties":{"aria-label":"rozdil mezi event targets v javascriptu a jak je vyuzit k optimalizaci permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Rozdíl mezi Event targets v JavaScriptu a jak je využít k optimalizaci.","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":74,"offset":74},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":74,"offset":74},"indent":[]},"data":{"id":"rozdil-mezi-event-targets-v-javascriptu-a-jak-je-vyuzit-k-optimalizaci","htmlAttributes":{"id":"rozdil-mezi-event-targets-v-javascriptu-a-jak-je-vyuzit-k-optimalizaci"},"hProperties":{"id":"rozdil-mezi-event-targets-v-javascriptu-a-jak-je-vyuzit-k-optimalizaci","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Představte si aplikaci, která obsahuje 200 klikatelných prvků na stránce. Reálným příkladem může být list e-mailů v single-page aplikaci. Každý e-mail poslouchá na ","position":{"start":{"line":4,"column":1,"offset":76},"end":{"line":4,"column":165,"offset":240},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">click</code>","position":{"start":{"line":4,"column":165,"offset":240},"end":{"line":4,"column":172,"offset":247},"indent":[]}},{"type":"text","value":" event aby následně otevřel overlay s obsahem e-mailu. Nechcete často proklikávat na další stránky, tak si zaškrtnete možnost zobrazit 200 e-mailů na jedné stránce. Nyní máte na stránce minimálně 200 event listenerů, které se museli alokovat. Takové množství už dokáže způsobit problémy s výkonem stránky na starších strojích. Takový problém lze řešit vcelku jednoduše pomocí variant Event targets. Stejné řešení používá i populární JavaScriptová knihovna ReactJS pro optimalizaci aplikací. Jak tento problém řešit jako experti z Facebooku naleznete níže.","position":{"start":{"line":4,"column":172,"offset":247},"end":{"line":4,"column":727,"offset":802},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":76},"end":{"line":4,"column":727,"offset":802},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":6,"column":1,"offset":804},"end":{"line":6,"column":4,"offset":807},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Každý kdo pracoval s Event handlery reagující na interakce uživatele se setkal s Event targets. Event target je objekt, který obsahuje informace o elementu, nad kterým event nastal. Definice je vcelku přímočará. Matoucí je fakt, že každý event má dva až tři Event targety z celkových tří možných.\nVšechny eventy obsahují targety:","position":{"start":{"line":8,"column":1,"offset":809},"end":{"line":9,"column":33,"offset":1138},"indent":[1]}}],"position":{"start":{"line":8,"column":1,"offset":809},"end":{"line":9,"column":33,"offset":1138},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"event.target","position":{"start":{"line":11,"column":3,"offset":1142},"end":{"line":11,"column":15,"offset":1154},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":1142},"end":{"line":11,"column":15,"offset":1154},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1140},"end":{"line":11,"column":15,"offset":1154},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"event.currentTarget","position":{"start":{"line":12,"column":3,"offset":1157},"end":{"line":12,"column":22,"offset":1176},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":1157},"end":{"line":12,"column":22,"offset":1176},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1155},"end":{"line":12,"column":22,"offset":1176},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1140},"end":{"line":12,"column":22,"offset":1176},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Eventy, ke kterým dochází v důsledku interakce uživatele s polohovacím zařízením (myš, touchpad) mají navíc tento target:","position":{"start":{"line":14,"column":1,"offset":1178},"end":{"line":14,"column":122,"offset":1299},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1178},"end":{"line":14,"column":122,"offset":1299},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"event.relatedTarget","position":{"start":{"line":16,"column":3,"offset":1303},"end":{"line":16,"column":22,"offset":1322},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":1303},"end":{"line":16,"column":22,"offset":1322},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1301},"end":{"line":16,"column":22,"offset":1322},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1301},"end":{"line":16,"column":22,"offset":1322},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#eventrelatedtarget","title":null,"children":[],"data":{"hProperties":{"aria-label":"eventrelatedtarget permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"event.relatedTarget","position":{"start":{"line":18,"column":4,"offset":1327},"end":{"line":18,"column":23,"offset":1346},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1324},"end":{"line":18,"column":23,"offset":1346},"indent":[]},"data":{"id":"eventrelatedtarget","htmlAttributes":{"id":"eventrelatedtarget"},"hProperties":{"id":"eventrelatedtarget","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Začneme tím nejméně známým, ale nejjednodušším, a to ","position":{"start":{"line":20,"column":1,"offset":1348},"end":{"line":20,"column":54,"offset":1401},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">event.relatedTarget</code>","position":{"start":{"line":20,"column":54,"offset":1401},"end":{"line":20,"column":75,"offset":1422},"indent":[]}},{"type":"text","value":". Tento objekt se používá v MouseEvent například při mouseenter, neboli při eventu, kdy kurzorem zajedeme do elementu (např. ","position":{"start":{"line":20,"column":75,"offset":1422},"end":{"line":20,"column":200,"offset":1547},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">id=red</code>","position":{"start":{"line":20,"column":200,"offset":1547},"end":{"line":20,"column":208,"offset":1555},"indent":[]}},{"type":"text","value":"), který na tento event poslouchá. Object relatedTarget po zavolání mouseenter obsahujeme okolní element, ze kterého jsme na našeho elementu (","position":{"start":{"line":20,"column":208,"offset":1555},"end":{"line":20,"column":350,"offset":1697},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">red</code>","position":{"start":{"line":20,"column":350,"offset":1697},"end":{"line":20,"column":355,"offset":1702},"indent":[]}},{"type":"text","value":") kurzorem zajeli.","position":{"start":{"line":20,"column":355,"offset":1702},"end":{"line":20,"column":373,"offset":1720},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1348},"end":{"line":20,"column":373,"offset":1720},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Objekt relatedTarget tedy obsahuje sekundární cíl. Co relatedTarget obsahuje při jakém eventu lze dočíst v ","position":{"start":{"line":22,"column":1,"offset":1722},"end":{"line":22,"column":108,"offset":1829},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/relatedTarget","children":[{"type":"text","value":"dokumentaci","position":{"start":{"line":22,"column":109,"offset":1830},"end":{"line":22,"column":120,"offset":1841},"indent":[]}}],"position":{"start":{"line":22,"column":108,"offset":1829},"end":{"line":22,"column":196,"offset":1917},"indent":[]}},{"type":"text","value":".\nTím jsme probrali relatedTarget a nyní se můžeme podívat na zbylé dva (target, currentTarget), se kterými lze docílit v úvodu zmíněné optimalize.","position":{"start":{"line":22,"column":196,"offset":1917},"end":{"line":23,"column":146,"offset":2064},"indent":[1]}}],"position":{"start":{"line":22,"column":1,"offset":1722},"end":{"line":23,"column":146,"offset":2064},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#event-delegation","title":null,"children":[],"data":{"hProperties":{"aria-label":"event delegation permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Event delegation","position":{"start":{"line":25,"column":4,"offset":2069},"end":{"line":25,"column":20,"offset":2085},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":2066},"end":{"line":25,"column":20,"offset":2085},"indent":[]},"data":{"id":"event-delegation","htmlAttributes":{"id":"event-delegation"},"hProperties":{"id":"event-delegation","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Abychom dokázali pochopit rozdíl mezi target a currentTarget, je třeba pochopit takzvaný Event delagation. Jedná se o techniku delegování poslechu eventů parent elementu pro všechny eventy, které se uskuteční uvnitř daného parent elementu. Co daný event provádí je takzvaný Event bubbling, kde každý event probublá přes všechny parent elementy až k ","position":{"start":{"line":27,"column":1,"offset":2087},"end":{"line":27,"column":350,"offset":2436},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">html</code>","position":{"start":{"line":27,"column":350,"offset":2436},"end":{"line":27,"column":356,"offset":2442},"indent":[]}},{"type":"text","value":" elementu. Jakýkoliv listener v jakémkoliv parentu může tento probublávající event zachytit.\nDíky Event delegation můžeme na ","position":{"start":{"line":27,"column":356,"offset":2442},"end":{"line":28,"column":33,"offset":2567},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">html</code>","position":{"start":{"line":28,"column":33,"offset":2567},"end":{"line":28,"column":39,"offset":2573},"indent":[]}},{"type":"text","value":" elementu zachytit všechny události, které nastaly kdekoliv na stránce.","position":{"start":{"line":28,"column":39,"offset":2573},"end":{"line":28,"column":110,"offset":2644},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2087},"end":{"line":28,"column":110,"offset":2644},"indent":[1]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// tuto funkcionalitu lze pro dany event ukoncit pomoci</span>\nevent<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":30,"column":1,"offset":2646},"end":{"line":33,"column":4,"offset":2736},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#eventtarget-vs-eventcurrenttarget","title":null,"children":[],"data":{"hProperties":{"aria-label":"eventtarget vs eventcurrenttarget permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"event.target vs event.currentTarget","position":{"start":{"line":35,"column":4,"offset":2741},"end":{"line":35,"column":39,"offset":2776},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2738},"end":{"line":35,"column":39,"offset":2776},"indent":[]},"data":{"id":"eventtarget-vs-eventcurrenttarget","htmlAttributes":{"id":"eventtarget-vs-eventcurrenttarget"},"hProperties":{"id":"eventtarget-vs-eventcurrenttarget","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Už víme jak eventy fungují. Jaký je tedy rozdíl mezi target a currentTarget? Target obsahuje referenci na objekt, nad kterým byl event zavolán, kdežto currentTarget je read-only objekt elementu, na který byl event listener napojen. Lépe to lze vysvětlit na příkladu. Jako příklad použijeme list s e-maily z úvodu. Vytvoříme tedy list s položkami v HTML","position":{"start":{"line":37,"column":1,"offset":2778},"end":{"line":37,"column":353,"offset":3130},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2778},"end":{"line":37,"column":353,"offset":3130},"indent":[]}},{"type":"html","lang":"html","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>e-mail #1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>e-mail #2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>e-mail #3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":39,"column":1,"offset":3132},"end":{"line":45,"column":4,"offset":3227},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"V JavaScriptu přidáme event listener, který bude poslouchat ","position":{"start":{"line":47,"column":1,"offset":3229},"end":{"line":47,"column":61,"offset":3289},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">click</code>","position":{"start":{"line":47,"column":61,"offset":3289},"end":{"line":47,"column":68,"offset":3296},"indent":[]}},{"type":"text","value":" eventy na ","position":{"start":{"line":47,"column":68,"offset":3296},"end":{"line":47,"column":79,"offset":3307},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;ul></code>","position":{"start":{"line":47,"column":79,"offset":3307},"end":{"line":47,"column":85,"offset":3313},"indent":[]}},{"type":"text","value":" elementu.","position":{"start":{"line":47,"column":85,"offset":3313},"end":{"line":47,"column":95,"offset":3323},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3229},"end":{"line":47,"column":95,"offset":3323},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"list\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">debugger</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":49,"column":1,"offset":3325},"end":{"line":54,"column":4,"offset":3440},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"V případě, že se vyvolá event ","position":{"start":{"line":56,"column":1,"offset":3442},"end":{"line":56,"column":31,"offset":3472},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">click</code>","position":{"start":{"line":56,"column":31,"offset":3472},"end":{"line":56,"column":38,"offset":3479},"indent":[]}},{"type":"text","value":", vyvolá se debuggovací funkcionalita (pokud v prostředí existuje). Když kód spustíme v prohlížeči, bude se chovat jako breakpoint (zastaví se exekuce kódu). Po naražení na náš breakpoint můžeme prozkoumat obsah proměných.\nOtevřeme si tedy vytvořený kód v prohlížeči a zároveň otevřeme DevTools (F12). Uvidíme list a v něm tři položky (e-mail #1-3). Když klikneme na první položku, zasekneme se na breakpointu a můžeme v pozastavené stránce prozkoumat proměnné. V tomto případě nás zajímá hodnota parametru ","position":{"start":{"line":56,"column":38,"offset":3479},"end":{"line":57,"column":285,"offset":3986},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">event</code>","position":{"start":{"line":57,"column":285,"offset":3986},"end":{"line":57,"column":292,"offset":3993},"indent":[]}},{"type":"text","value":" v arrow funkci uvnitř ","position":{"start":{"line":57,"column":292,"offset":3993},"end":{"line":57,"column":315,"offset":4016},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">addEventListener</code>","position":{"start":{"line":57,"column":315,"offset":4016},"end":{"line":57,"column":333,"offset":4034},"indent":[]}},{"type":"text","value":". Na screenshotu níže vidíme, že currentTarget odkazuje na ","position":{"start":{"line":57,"column":333,"offset":4034},"end":{"line":57,"column":392,"offset":4093},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;ul></code>","position":{"start":{"line":57,"column":392,"offset":4093},"end":{"line":57,"column":398,"offset":4099},"indent":[]}},{"type":"text","value":" list. Když najedete kurzorem na ","position":{"start":{"line":57,"column":398,"offset":4099},"end":{"line":57,"column":431,"offset":4132},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ul#list</code>","position":{"start":{"line":57,"column":431,"offset":4132},"end":{"line":57,"column":440,"offset":4141},"indent":[]}},{"type":"text","value":" tak se vám na stránce vyznačí na jaký element se odkazuje.\n","position":{"start":{"line":57,"column":440,"offset":4141},"end":{"line":58,"column":1,"offset":4201},"indent":[1]}},{"type":"html","title":null,"url":"../images/blog/targets-debug-1.png","alt":"Screenshot of DevTools with currentTarget","position":{"start":{"line":58,"column":1,"offset":4201},"end":{"line":58,"column":81,"offset":4281},"indent":[]},"value":"<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/040e104aed599c665360870aa0c8bab8/2c95d/targets-debug-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 113.7142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9UlEQVQ4y6WS247aMBCG8yKrFTh2bMc4zgkHJ4U9ENEX6ONwxx3Hey7RVtpeLIeVWOC6VH2sTqCs2lJts+XTyPoznj8zTmx9fniYTqfz+XzxO5B4fl583S/3++W37y+gz0oW1pfHx9lsdm5+fQXE09Pfd63lcrlarRb/hbW4gMvM8wuwXt5kvV5vt9vdbrfZbM53rfF4PIIYDUfDYaEPDAaDo55MJr1er9vt9vt90KMTx13LGFPXum4yY1IgSZLWgUajEcex1ppSWqlUlFJQeczACmVRFFmg7m5vE6hNjVIeFAVBAEl1wPM8eAzD0Pd9dYblJ9H9p4+B8rXUvhcqL8DYRgjZJbD8MLjv5JSyVGSJSjmXCFXtclgwabvdZoyFLG7UjKCSUmHb5TrD6GCmjAU0NDITTBFCkV3MjUqbqXaTTLU4D2y7ShFi1SoEefPwP82Ms0Q0mt6NlpkvgzrC8dVVcH3NKxVUpnPM60nNcIdjjBEmVYwh0D/Hzg/mkEeZbNZchQl5xwfL27lDqRFGy5RSWdL5OnYOndPahxt1x5n3XnMxdsSjWCQYk+J6neIPfk2exs5z13XhVykR2QRTUoCJQ47hABTOBStoDKrQTmGGq9/pdGpS1l3dVK1AaikEXDiHuQ7jFIK7DMIVsBZJLtxDATT/AWhz2QgPev2lAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/040e104aed599c665360870aa0c8bab8/c54d4/targets-debug-1.webp 175w,\n/static/040e104aed599c665360870aa0c8bab8/a3432/targets-debug-1.webp 350w,\n/static/040e104aed599c665360870aa0c8bab8/426ac/targets-debug-1.webp 700w,\n/static/040e104aed599c665360870aa0c8bab8/c139f/targets-debug-1.webp 1050w,\n/static/040e104aed599c665360870aa0c8bab8/ac796/targets-debug-1.webp 1099w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/040e104aed599c665360870aa0c8bab8/4edbd/targets-debug-1.png 175w,\n/static/040e104aed599c665360870aa0c8bab8/13ae7/targets-debug-1.png 350w,\n/static/040e104aed599c665360870aa0c8bab8/8c557/targets-debug-1.png 700w,\n/static/040e104aed599c665360870aa0c8bab8/e996b/targets-debug-1.png 1050w,\n/static/040e104aed599c665360870aa0c8bab8/2c95d/targets-debug-1.png 1099w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/040e104aed599c665360870aa0c8bab8/8c557/targets-debug-1.png\"\n            alt=\"Screenshot of DevTools with currentTarget\"\n            title=\"Screenshot of DevTools with currentTarget\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of DevTools with currentTarget</figcaption>\n  </figure>"},{"type":"text","value":"\nPo zascrollování vidíme i target, který odkazuje na položku na kterou jsme kliknuli.\n","position":{"start":{"line":58,"column":81,"offset":4281},"end":{"line":60,"column":1,"offset":4367},"indent":[1,1]}},{"type":"html","title":null,"url":"../images/blog/targets-debug-2.png","alt":"Screenshot of DevTools with target","position":{"start":{"line":60,"column":1,"offset":4367},"end":{"line":60,"column":74,"offset":4440},"indent":[]},"value":"<figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a4339a76612bcf5171d3139b0aa2364/e3829/targets-debug-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB70lEQVQ4y6WRyY7aQBCG+0U4DHYv1e02tsELzaKRGSkPkGfhwgmJTTzC5Da5IRQ2KQeCYCZvlmozQzJAolH4VC7ZVfrL1X+Tr09Pj49fVhcsl6vNZvX8vD4c1i8/v+M7Vs4g8/l8Nput/sJiUcS35dUuWa/XGxz7X5DVDdwmXtwA+fFPttvtfr8/HA673e6yS0aj0XA4HB/zeHzMg8FgMplgC3Ov1+t2u/1+fzqdYhcrp0zSNI2iqJqkcZwkcVKr1bIsNcZUq9UgCLDlum6pVJJSHithGJ4yqZt656Hjad8EjXZ0HwWx8iyigHOOMvwEAHEBSXKTf/4EXMQyibyUUnDKFucDkCRN8k4uBLT9diu4l1BxXcf9GAQP2bFi0dKtut+klONIK7f5nFPxtzjPcwBptKl4VcqY4JRxTrlgHM8suIAiEMAKE6+H/1MMsUoznUU69tEtEAwUB4lDQaoiPMwCFANPKYUu2jMXa3fQ1VglqTbANe5k/cLnLSx3hYvlO8d5tfPdn1OVGb8Z6Iwzdlz5eFVQICVuiyHPDUMxbtLwm+h2y/WaZWEo1MtO6JQZDuJ2Cl6zPT+HK2Kc3NCtZsWEoKXwFYSMwbU7sxVK6Tsx2pJ4aaDQLPQGtK8964sSxdq+b+sKbQNbxE+pFIp/AXyZuhPN5XUDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5a4339a76612bcf5171d3139b0aa2364/c54d4/targets-debug-2.webp 175w,\n/static/5a4339a76612bcf5171d3139b0aa2364/a3432/targets-debug-2.webp 350w,\n/static/5a4339a76612bcf5171d3139b0aa2364/426ac/targets-debug-2.webp 700w,\n/static/5a4339a76612bcf5171d3139b0aa2364/c139f/targets-debug-2.webp 1050w,\n/static/5a4339a76612bcf5171d3139b0aa2364/f0bfb/targets-debug-2.webp 1077w\"\n              sizes=\"(max-width: 700px) 100vw, 700px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5a4339a76612bcf5171d3139b0aa2364/4edbd/targets-debug-2.png 175w,\n/static/5a4339a76612bcf5171d3139b0aa2364/13ae7/targets-debug-2.png 350w,\n/static/5a4339a76612bcf5171d3139b0aa2364/8c557/targets-debug-2.png 700w,\n/static/5a4339a76612bcf5171d3139b0aa2364/e996b/targets-debug-2.png 1050w,\n/static/5a4339a76612bcf5171d3139b0aa2364/e3829/targets-debug-2.png 1077w\"\n            sizes=\"(max-width: 700px) 100vw, 700px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5a4339a76612bcf5171d3139b0aa2364/8c557/targets-debug-2.png\"\n            alt=\"Screenshot of DevTools with target\"\n            title=\"Screenshot of DevTools with target\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Screenshot of DevTools with target</figcaption>\n  </figure>"},{"type":"text","value":"\nVidíme tedy, že target obsahuje element, na který se kliklo a currentTarget element, který na klik poslouchal. Bystré oko si všimne i relatedTargetu, jelikož je i ","position":{"start":{"line":60,"column":74,"offset":4440},"end":{"line":61,"column":164,"offset":4604},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">click</code>","position":{"start":{"line":61,"column":164,"offset":4604},"end":{"line":61,"column":171,"offset":4611},"indent":[]}},{"type":"text","value":" event MouseEvent.\nNyní už máme solidní porozumění ohledně rozdílu mezi target a currentTarget.\n","position":{"start":{"line":61,"column":171,"offset":4611},"end":{"line":63,"column":1,"offset":4707},"indent":[1,1]}},{"type":"strong","children":[{"type":"text","value":"Poznámka:","position":{"start":{"line":63,"column":3,"offset":4709},"end":{"line":63,"column":12,"offset":4718},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":4707},"end":{"line":63,"column":14,"offset":4720},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":63,"column":14,"offset":4720},"end":{"line":63,"column":15,"offset":4721},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">debugger</code>","position":{"start":{"line":63,"column":15,"offset":4721},"end":{"line":63,"column":25,"offset":4731},"indent":[]}},{"type":"text","value":" v kódu používáme především protože currentTarget je dostupný pouze v době zpracování eventu. Pokud si tedy zavoláme ","position":{"start":{"line":63,"column":25,"offset":4731},"end":{"line":63,"column":142,"offset":4848},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">console.log(event)</code>","position":{"start":{"line":63,"column":142,"offset":4848},"end":{"line":63,"column":162,"offset":4868},"indent":[]}},{"type":"text","value":", v daném objektu uvidíte v konzoli currentTarget jako ","position":{"start":{"line":63,"column":162,"offset":4868},"end":{"line":63,"column":217,"offset":4923},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">null</code>","position":{"start":{"line":63,"column":217,"offset":4923},"end":{"line":63,"column":223,"offset":4929},"indent":[]}},{"type":"text","value":". Pozor na to!","position":{"start":{"line":63,"column":223,"offset":4929},"end":{"line":63,"column":237,"offset":4943},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3442},"end":{"line":63,"column":237,"offset":4943},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#optimalizace","title":null,"children":[],"data":{"hProperties":{"aria-label":"optimalizace permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Optimalizace","position":{"start":{"line":65,"column":4,"offset":4948},"end":{"line":65,"column":16,"offset":4960},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":4945},"end":{"line":65,"column":16,"offset":4960},"indent":[]},"data":{"id":"optimalizace","htmlAttributes":{"id":"optimalizace"},"hProperties":{"id":"optimalizace","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Jak tedy tento rozdíl promítnou do optimalizace kódu? V případě, že bychom měli na stránce několik desítek/stovek/tisíc souvisejících elementů, který by měly vlastní event handlery, zbytečně bychom zahltili prohlížeč listenery. Dále bychom zahltili i nás. Pro každý element bychom museli přidat event listener a případně ho i odstranit. To se může vymknout kontrole. Jednoduší přístup je tedy nastavit jeden event listener na parent element (v našem případě ","position":{"start":{"line":67,"column":1,"offset":4962},"end":{"line":67,"column":459,"offset":5420},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;ul></code>","position":{"start":{"line":67,"column":459,"offset":5420},"end":{"line":67,"column":465,"offset":5426},"indent":[]}},{"type":"text","value":"), který bude pomocí target rozlišovat kliknutí na jednotlivé položky (e-maily v ","position":{"start":{"line":67,"column":465,"offset":5426},"end":{"line":67,"column":546,"offset":5507},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;li></code>","position":{"start":{"line":67,"column":546,"offset":5507},"end":{"line":67,"column":552,"offset":5513},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":67,"column":552,"offset":5513},"end":{"line":67,"column":554,"offset":5515},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":4962},"end":{"line":67,"column":554,"offset":5515},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Stejný přístup používá i zmíněný ReactJS. Ten nastaví jeden event listener na root element, který zachytává všechny události, které následně přiřadí jednotlivým listenerům jako ","position":{"start":{"line":69,"column":1,"offset":5517},"end":{"line":69,"column":178,"offset":5694},"indent":[]}},{"type":"link","title":null,"url":"https://reactjs.org/docs/events.html","children":[{"type":"text","value":"SyntheticEvent","position":{"start":{"line":69,"column":179,"offset":5695},"end":{"line":69,"column":193,"offset":5709},"indent":[]}}],"position":{"start":{"line":69,"column":178,"offset":5694},"end":{"line":69,"column":232,"offset":5748},"indent":[]}},{"type":"text","value":". SyntheticEvent je obal nativního eventu kvůli cross-browser kompatibilitě. Tímto delegováním ReactJS docílí značné optimalizace.\n","position":{"start":{"line":69,"column":232,"offset":5748},"end":{"line":70,"column":1,"offset":5879},"indent":[1]}},{"type":"strong","children":[{"type":"text","value":"Poznámka:","position":{"start":{"line":70,"column":3,"offset":5881},"end":{"line":70,"column":12,"offset":5890},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":5879},"end":{"line":70,"column":14,"offset":5892},"indent":[]}},{"type":"text","value":" v aplikacích s ReactJS je tato optimalizace zbytečná, jelikož to již dělá ReactJS.","position":{"start":{"line":70,"column":14,"offset":5892},"end":{"line":70,"column":97,"offset":5975},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":5517},"end":{"line":70,"column":97,"offset":5975},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#shrnuti","title":null,"children":[],"data":{"hProperties":{"aria-label":"shrnuti permalink","class":"Blog-share before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Shrnutí","position":{"start":{"line":72,"column":4,"offset":5980},"end":{"line":72,"column":11,"offset":5987},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":5977},"end":{"line":72,"column":11,"offset":5987},"indent":[]},"data":{"id":"shrnuti","htmlAttributes":{"id":"shrnuti"},"hProperties":{"id":"shrnuti","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Vysvětlil jsem rozdíl mezi target, currentTarget a relatedTarget. Víme, že relatedTarget je pouze na MouseEvent eventech. Dále také rozdíl mezi target a currentTarget pomocí event delagation využívající event bubbling, který lze použít k optimalizaci.","position":{"start":{"line":74,"column":1,"offset":5989},"end":{"line":74,"column":252,"offset":6240},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":5989},"end":{"line":74,"column":252,"offset":6240},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":75,"column":1,"offset":6241}}}}